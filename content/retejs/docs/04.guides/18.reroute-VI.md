---
description: Tìm hiểu cách triển khai tính năng reroute connection trong dự án của bạn với package rete-connection-reroute-plugin, và cải thiện trải nghiệm người dùng
keywords: reroute,connection rerouting,pins,ux,user experience
---

# Reroute

::alert
Hướng dẫn này dựa trên [Basic](/docs/guides/basic). Bạn nên xem qua để hiểu tổng thể trước khi đọc hướng dẫn này.
::
::references
:ref-example{title="Reroute" link="/examples/reroute"}
:ref-guide{title="Selectable" link="/docs/guides/selectable"}
:ref-github{title="Plugin" link="https://github.com/retejs/connection-reroute-plugin"}
::

## Cài đặt dependencies {#install-dependencies}

:kit

```bash
npm i rete-connection-reroute-plugin
```

## Kết nối plugin {#connect-plugin}

```ts
import { ReroutePlugin, RerouteExtra } from "rete-connection-reroute-plugin";

type AreaExtra =
  | Area2D<Schemes> // kiểu này là bắt buộc
  | ReactArea2D<Schemes>
  | RerouteExtra;

const reroutePlugin = new ReroutePlugin<Schemes>();

render.use(reroutePlugin);
```

Plugin đã được kết nối, nhưng bạn cũng cần kết nối preset hiển thị để render các pin.

## Hiển thị {#rendering}

Hiện tại, việc hiển thị pin reroute có thể thực hiện bằng các plugin render cho **React.js**, **Vue.js**, **Angular**, **Svelte** và **Lit**.

```ts
import { Presets } from "rete-react-plugin"; // hoặc  rete-vue-plugin, rete-angular-plugin, rete-svelte-plugin, @retejs/lit-plugin

render.addPreset(
  Presets.reroute.setup({
    contextMenu(id) {
      reroutePlugin.remove(id);
    },
    translate(id, dx, dy) {
      reroutePlugin.translate(id, dx, dy);
    },
  })
);
```

Để biết cách kết nối plugin render cụ thể với stack của bạn, hãy làm theo hướng dẫn cho
[React.js](/docs/guides/renderers/react), [Vue.js](/docs/guides/renderers/vue), [Angular](/docs/guides/renderers/angular), [Svelte](/docs/guides/renderers/svelte) hoặc [Lit](/docs/guides/renderers/lit)

## Chọn Pin {#selectable}

Như đã giải thích trong hướng dẫn [Selectable](/docs/guides/selectable), bạn có thể điều chỉnh việc chọn tất cả loại phần tử.

Đoạn code sau cần dùng để thêm pin vào hệ thống chọn:

```ts
import { RerouteExtensions } from "rete-connection-reroute-plugin";

const selector = AreaExtensions.selector();
const accumulating = AreaExtensions.accumulateOnCtrl();

AreaExtensions.selectableNodes(area, selector, { accumulating });
RerouteExtensions.selectablePins(reroutePlugin, selector, accumulating);

render.addPreset(
  Presets.reroute.setup({
    pointerdown(id) {
      reroutePlugin.unselect(id);
      reroutePlugin.select(id);
    },
    // giữ lại contextMenu và translate từ đoạn code trên
  })
);
```

Trong đó

- `RerouteExtensions.selectablePins` là extension nhỏ gọn giúp thêm/xóa pin vào registry các phần tử được chọn, và cho phép di chuyển chúng.
- Sự kiện `pointerdown` được kích hoạt khi click vào pin và đánh dấu nó là pin được chọn

Xem kết quả hoàn chỉnh tại ví dụ [Reroute](/examples/reroute).
