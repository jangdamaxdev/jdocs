---
description: Tìm hiểu về công cụ Rete CLI giúp xây dựng plugin dễ dàng. Với hỗ trợ sẵn cho TypeScript, ESLint và Jest, bạn có thể bắt đầu xây dựng mà không cần tự thiết lập môi trường build, lint và test
keywords: cli,build plugin,commandline interface
---

# Rete CLI

::references
:ref-github{title="Rete CLI" link="https://github.com/retejs/rete-cli"}
:ref-external{title="Rollup" link="https://rollupjs.org/"}
:ref-external{title="ESLint" link="https://eslint.org/"}
:ref-external{title="Jest" link="https://jestjs.io/"}
:ref-external{title="TypeDoc" link="https://typedoc.org/"}
::

:diagram{name="cli/index" caption="Kiến trúc"}

Rete CLI là một công cụ build với hỗ trợ sẵn cho TypeScript và ESLint cùng các rule được định nghĩa trước. Ngoài ra, nó còn tích hợp Jest. Những tính năng này giúp bạn dễ dàng bắt đầu xây dựng plugin mới mà không cần tự thiết lập môi trường build, lint và test.

Tính năng build dựa trên Rollup và đã cấu hình sẵn Babel preset hỗ trợ TypeScript.

## Cài đặt {#install-rete-cli}

```bash
npm i -g rete-cli
```
## Build project {#build-rete-cli}

Bước đầu tiên là tạo file cấu hình tên là `rete.config.ts`
```ts
import { ReteOptions } from 'rete-cli'

export default<ReteOptions>{
  input: 'src/index.ts', // đường dẫn tới file entry
  name: 'Namespace' // namespace cho UMD bundles
}
```

Chạy lệnh

```bash
rete build --config rete.config.ts
```

Thư mục `dist` được sinh ra đã sẵn sàng để publish và bao gồm tất cả các bundle cần thiết, type definitions, README.md, và file package.json với các đường dẫn tương ứng.

Tùy chọn `--watch` có thể dùng để tự động build lại khi lưu file, còn tùy chọn `--outputs` cho phép chỉ định nhiều đường dẫn output, cách nhau bằng dấu phẩy cho đích build.

## Tạo cấu hình nâng cao {#create-config-rete-cli}

Dưới đây là một số tùy chọn cấu hình được hỗ trợ:

- kết nối plugin Rollup
- chỉ định các dependency bên thứ ba không cần bundle
- chỉ định đường dẫn output
- kết nối plugin và preset Babel

```ts
import { ReteOptions } from 'rete-cli'

export default <ReteOptions>[ // cấu hình với nhiều entry
  {
    input: 'src/foo/index.ts',
    name: 'Namespace'
    babel: {
      presets: [
        require('@babel/preset-env'), // dùng mặc định, nhưng nên khai báo khi bạn chỉ định 'presets'
        require('@babel/preset-typescript'), // dùng mặc định
        require('@babel/preset-react'),
      ]
    }
  },
  {
    input: 'src/bar/index.ts',
    name: 'Namespace'
    globals: {
      'rete': 'Rete',
    },
    plugins: [ // chỉ định plugin Rollup
      commonjs(),
    ],
    babel: {
      plugins: [
        // thêm plugin Babel
      ]
    }
  }
]
```

## Lint code {#lint-rete-cli}

Mặc định, khi chạy lệnh `rete build` sẽ bao gồm bước lint trước khi sinh bundle. Tuy nhiên, bạn cũng có thể lint riêng bằng lệnh sau.

```bash
rete lint
```


