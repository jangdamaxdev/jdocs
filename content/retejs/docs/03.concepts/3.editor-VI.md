---
description: Khám phá lõi của node editor và tìm hiểu cách nó hỗ trợ quản lý đồ thị, bao gồm thêm/xóa node và connection. Ngoài ra, tìm hiểu cách trực quan hóa editor và khởi tạo tương tác với connection
keywords: graph,thêm node,xóa node,thêm connection,xóa connection,visualize
---

# Editor

:diagram{name="editor/node-editor" caption="NodeEditor"}

`NodeEditor` là một class triển khai giao diện để tương tác với đồ thị. Tương tự các module khác, nó mở rộng từ `Scope`: có thể sinh tín hiệu và cung cấp khả năng kết nối các plugin.

```ts
import { NodeEditor, BaseSchemes } from "rete";

type Schemes = BaseSchemes; // có Node { id: string } và Connection { id: string, source: string, target: string }

const editor = new NodeEditor<Schemes>();
```

Kiểu `Schemes` sẽ được sử dụng cho mục đích suy luận kiểu ở các bước tiếp theo.

Có một [preset classic](/docs/concepts/presets#data-structures) cung cấp các interface để xây dựng node.

Editor có thể áp dụng cả phía client và server. Ở phía client, nó cung cấp dữ liệu để trực quan hóa. Ở phía server, nó cung cấp dữ liệu để xử lý đồ thị, ví dụ qua `rete-engine` hoặc các tương tác khác dùng `rete-structures`.

## Node and Connection management {#node-connection-management}

:diagram{name="editor/classic-preset" caption="ClassicPreset"}

Chúng ta có thể thêm node dưới dạng một object thông thường với trường `id` bắt buộc, hoặc dùng node từ `ClassicPreset`

```ts
import { ClassicPreset } from "rete";

const node = new ClassicPreset.Node("Label");

node.addOutput("output", new ClassicPreset.Output(socket, "Title"));

await editor.addNode(node);
```

Xóa node bằng `id`

```ts
await editor.removeNode(node.id);
```

Để tạo connection, bạn có thể dùng object cơ bản với các trường bắt buộc (`id`, `source`, `target`) hoặc dùng classic preset yêu cầu truyền node nguồn và node đích để kiểm tra kiểu TypeScript.

```ts
import { ClassicPreset } from "rete";

const connection = new ClassicPreset.Connection(
  sourceNode,
  "portKey",
  targetNode,
  "portKey"
);

await editor.addConnection(connection);
```

Xóa connection bằng `id`

```ts
await editor.removeConnection(connection.id);
```

## Create a 2D area {#create-2d-area}

:diagram{name="editor/area" caption="AreaPlugin"}

Để trực quan hóa trên HTML, cần có `rete-area-plugin`. Plugin này chịu trách nhiệm cho các tính năng cơ bản như zoom, kéo thả, và là điểm vào cho các plugin khác để trực quan hóa và tương tác với người dùng.

```ts
import { AreaPlugin } from "rete-area-plugin";

const area = new AreaPlugin<Schemes, AreaExtra>(container); // container là HTMLElement nơi area sẽ được gắn vào
```

Kiểu `AreaExtra` là cần thiết để tích hợp các loại tín hiệu khác, ví dụ render các loại phần tử ngoài `node` và `connection`.

Plugin này có các extension. Một số extension triển khai chức năng của v1, nhưng có một điểm khác biệt lớn - chúng là tùy chọn. Ví dụ, extension chọn node không chỉ hỗ trợ chọn node mà còn có thể mở rộng (xem ví dụ [Comments](/examples/comments)), hoặc có thể thay thế bằng một cách triển khai khác.

```ts
import { AreaExtensions } from "rete-area-plugin";

AreaExtensions.selectableNodes(area, AreaExtensions.selector(), {
  accumulating: AreaExtensions.accumulateOnCtrl(),
});
```

## Interaction with connections {#interaction-with-connections}

:diagram{name="editor/connection" caption="ConnectionPlugin"}

Plugin `rete-connection-plugin` chịu trách nhiệm cho tương tác người dùng với connection (tạo, xóa)

```ts
import {
  BidirectFlow,
  ConnectionPlugin,
  Presets as ConnectionPresets,
} from "rete-connection-plugin";

const connection = new ConnectionPlugin<Schemes, AreaExtra>();

connection.addPreset(ConnectionPresets.classic.setup());
```

Khác với Rete.js v1, plugin này không render connection.

## Rendering {#rendering}

:diagram{name="editor/rendering" caption="Rendering"}

Việc render UI được xử lý hoàn toàn bởi các plugin render (trừ một số ngoại lệ), các plugin này cung cấp preset cho nhiều loại chức năng khác nhau.

Hãy xem ví dụ sử dụng `rete-react-plugin`

```ts
import {
  ReactArea2D,
  ReactPlugin,
  Presets as ReactPresets,
} from "rete-react-plugin";
import { MinimapExtra } from "rete-minimap-plugin";
import { ContextMenuExtra } from "rete-context-menu-plugin";

type AreaExtra = ReactArea2D<Schemes> | ContextMenuExtra | MinimapExtra;

const reactPlugin = new ReactPlugin<Schemes, AreaExtra>();

reactPlugin.addPreset(ReactPresets.classic.setup());
reactPlugin.addPreset(ReactPresets.contextMenu.setup());
reactPlugin.addPreset(ReactPresets.minimap.setup());

area.use(reactPlugin);
```

Mỗi phần tử trong editor như node, control, socket, hoặc connection, về mặt kỹ thuật là một cây phần tử độc lập, điều này mang lại sự linh hoạt khi kết hợp các framework render khác nhau. Thông tin thêm có trong bài viết [Integration](/docs/concepts/integration).
